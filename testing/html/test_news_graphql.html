<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GraphQL Test - News/Updates</title>
</head>
<body>
    <h1>GraphQL Test - News/Updates</h1>
    <div id="output"></div>

    <script>
        async function testGraphQL() {
            const output = document.getElementById('output');
            
            // Test the GET_ALL_UPDATES query
            const query = `
                query GetAllUpdates {
                    allUpdates {
                        id
                        type
                        title
                        summary
                        body
                        timestamp
                        status
                        tags
                        author
                        icon
                        priority
                        isActive
                        createdAt
                        updatedAt
                        expiresAt
                        createdBy {
                            id
                            username
                            firstName
                            lastName
                        }
                    }
                }
            `;

            try {
                const response = await fetch('http://localhost:8000/graphql/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNzU3MDg4Mzk2LCJpYXQiOjE3NTcwMDE5OTZ9.A3Bx0CdO8WjJUnWwhC_o5S26jyfkxt1A6xh227JH8mU'
                    },
                    body: JSON.stringify({ query })
                });

                const result = await response.json();
                
                output.innerHTML = `
                    <h2>Response Status: ${response.status}</h2>
                    <h3>Response:</h3>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (error) {
                output.innerHTML = `<h2>Error:</h2><pre>${error.message}</pre>`;
            }
        }

        // Run test on page load
        testGraphQL();
    </script>
</body>
</html>
